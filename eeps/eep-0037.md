    Author: Bj√∂rn-Egil Dahlberg <egil(at)erlang(dot)org>
    Status: Draft
    Type: Standard Track
    Created: 27-Jul-2010
    Erlang-Version: R15A
    Post-History:
****
EEP XXX: Dot dot notation
----



Abstract
========

Erlang should adobt the dot dot notation, '..', from Haskell. This will 
lessen the literal footprint of lists in source code, make generation
of static lists at compile time and open up for performance optimizations
in list comprehensions.


Specification
=============

Syntax,

    [S..E]
    [S,S1..E]

where,

    S, S1 and E are integers.
    S /= S1.

The lists generation is only for integers. The first integer, S, is for the
first number in the sequence. The last integer, E, is the last number in
the sequence. If two integers represents the start of the number sequence,
the second integer, S1, will dictate the increment value for the sequence.

Explanation with lists:seq/3,

    [S,S1..E] = lists:seq(S,E,S1-S)

Examples,

    [1..5]    = [1,2,3,4,5]
    [1,3..13] = [1,3,5,7,9,11,13]
    [9,8..0]  = [9,8,7,6,5,4,3,2,1,0]
    [1..0]    = [1,0]
    [$a..$z]  = "abcdefghijklmnopqrstuvwxyz"
    [-3..3]   = [-3,-2,-1,0,1,2,3]
    [3..-3]   = [3,2,1,0,-1,-2,-3]

Constant evaluation by the compiler,

    S = 1,
    E = S + 4,
    [S..E] = [1,2,3,4,5].  % compile time evaluated

Run time evaluation when variables are unknown at compile time,

    self() ! {1, 5},
    {S, E} = receive Range -> Range end,
    [S..E] = [1,2,3,4,5].  % run time evaluated

This last scenario behaviour will be equivalent to the lists:seq/2,3 call.
    

Motivation
==========

With dot dot notation Erlang code will be cleaner and more compact when
constructing static lists of integers. Lists can be generated in compile time
and can speed up initializations steps where this type of coding occurs.

Compile time generated lists can be optimized by the compiler, this is
especially true for list comprehensions.

    [spawn_link(fun() -> loop() end || _ <- [1..1000]]

compared to

    [spawn_link(fun() -> loop() end || _ <- lists:seq(1, 1000)]

or

    [map(X,Y) || X <- [99,98..0], Y <- [99,98..0]]

compared to

    [map(X,Y) || X <- lists:seq(99,0,-1), Y <- lists:seq(99,0,-1)]


In both these cases the source code is more compact, more readable and it
would be faster when executed. Less intermediate garbage is generated which
in turn will give fewer collects and thus also better performance.


Rationale
=========





Copyright
=========

This document has been placed in the public domain.



[EmacsVar]: <> "Local Variables:"
[EmacsVar]: <> "mode: indented-text"
[EmacsVar]: <> "indent-tabs-mode: nil"
[EmacsVar]: <> "sentence-end-double-space: t"
[EmacsVar]: <> "fill-column: 70"
[EmacsVar]: <> "coding: utf-8"
[EmacsVar]: <> "End:"
